/*!
 * bootstrap-tags 1.2.0
 * https://github.com/maxwells/bootstrap-tags
 * Copyright 2013 Max Lahey; Licensed MIT
 */

!function(a){!function(){window.Tags||(window.Tags={}),jQuery(function(){return a.tags=function(b,c){var d,e,f,g,h,i,j,k,l,m,n=this;null==c&&(c={});for(d in c)g=c[d],this[d]=g;if(this.bootstrapVersion||(this.bootstrapVersion="3"),this.readOnly||(this.readOnly=!1),this.suggestOnClick||(this.suggestOnClick=!1),this.suggestions||(this.suggestions=[]),this.restrictTo=null!=c.restrictTo?c.restrictTo.concat(this.suggestions):!1,this.exclude||(this.exclude=!1),this.displayPopovers=null!=c.popovers?!0:null!=c.popoverData,this.popoverTrigger||(this.popoverTrigger="hover"),this.tagClass||(this.tagClass="btn-info"),this.tagSize||(this.tagSize="md"),this.promptText||(this.promptText="Enter tags..."),this.caseInsensitive||(this.caseInsensitive=!1),this.readOnlyEmptyMessage||(this.readOnlyEmptyMessage="No tags to display..."),this.maxNumTags||(this.maxNumTags=-1),this.beforeAddingTag||(this.beforeAddingTag=function(){}),this.afterAddingTag||(this.afterAddingTag=function(){}),this.beforeDeletingTag||(this.beforeDeletingTag=function(){}),this.afterDeletingTag||(this.afterDeletingTag=function(){}),this.definePopover||(this.definePopover=function(a){return'associated content for "'+a+'"'}),this.excludes||(this.excludes=function(){return!1}),this.tagRemoved||(this.tagRemoved=function(){}),this.pressedReturn||(this.pressedReturn=function(){}),this.pressedDelete||(this.pressedDelete=function(){}),this.pressedDown||(this.pressedDown=function(){}),this.pressedUp||(this.pressedUp=function(){}),this.$element=a(b),null!=c.tagData?this.tagsArray=c.tagData:(f=a(".tag-data",this.$element).html(),this.tagsArray=null!=f?f.split(","):[]),c.popoverData)this.popoverArray=c.popoverData;else for(this.popoverArray=[],l=this.tagsArray,h=0,j=l.length;j>h;h++)e=l[h],this.popoverArray.push(null);if(c.href)this.href=c.href;else for(this.href=[],m=this.tagsArray,i=0,k=m.length;k>i;i++)e=m[i],this.href.push(null);return this.getTags=function(){return n.tagsArray},this.getTagsContent=function(){return n.popoverArray},this.getTagsWithContent=function(){var a,b,c,d;for(a=[],b=c=0,d=n.tagsArray.length-1;d>=0?d>=c:c>=d;b=d>=0?++c:--c)a.push({tag:n.tagsArray[b],content:n.popoverArray[b]});return a},this.getTag=function(a){var b;return b=n.tagsArray.indexOf(a),b>-1?n.tagsArray[b]:null},this.getTagWithContent=function(a){var b;return b=n.tagsArray.indexOf(a),{tag:n.tagsArray[b],content:n.popoverArray[b]}},this.hasTag=function(a){return n.tagsArray.indexOf(a)>-1},this.removeTagClicked=function(b){return"A"===b.currentTarget.tagName&&(n.removeTag(a("span",b.currentTarget.parentElement).html()),a(b.currentTarget.parentNode).remove()),n},this.removeLastTag=function(){return n.tagsArray.length>0&&(n.removeTag(n.tagsArray[n.tagsArray.length-1]),n.canAddByMaxNum()&&n.enableInput()),n},this.removeTag=function(a){if(n.tagsArray.indexOf(a)>-1){if(n.beforeDeletingTag(a)===!1)return;n.popoverArray.splice(n.tagsArray.indexOf(a),1),n.tagsArray.splice(n.tagsArray.indexOf(a),1),n.renderTags(),n.afterDeletingTag(a),n.canAddByMaxNum()&&n.enableInput()}return n},this.canAddByRestriction=function(a){return this.restrictTo===!1||-1!==this.restrictTo.indexOf(a)},this.canAddByExclusion=function(a){return(this.exclude===!1||-1===this.exclude.indexOf(a))&&!this.excludes(a)},this.canAddByMaxNum=function(){return-1===this.maxNumTags||this.tagsArray.length<this.maxNumTags},this.addTag=function(a){var b;if(n.canAddByRestriction(a)&&!n.hasTag(a)&&a.length>0&&n.canAddByExclusion(a)&&n.canAddByMaxNum()){if(n.beforeAddingTag(a)===!1)return;b=n.definePopover(a),n.popoverArray.push(b||null),n.tagsArray.push(a),n.afterAddingTag(a),n.renderTags(),n.canAddByMaxNum()||n.disableInput()}return n},this.addTagWithContent=function(a,b){if(n.canAddByRestriction(a)&&!n.hasTag(a)&&a.length>0){if(n.beforeAddingTag(a)===!1)return;n.tagsArray.push(a),n.popoverArray.push(b),n.afterAddingTag(a),n.renderTags()}return n},this.renameTag=function(a,b){return n.tagsArray[n.tagsArray.indexOf(a)]=b,n.renderTags(),n},this.setPopover=function(a,b){return n.popoverArray[n.tagsArray.indexOf(a)]=b,n.renderTags(),n},this.clickHandler=function(a){return n.makeSuggestions(a,!0)},this.keyDownHandler=function(a){var b,c;switch(b=null!=a.keyCode?a.keyCode:a.which){case 13:return a.preventDefault(),n.pressedReturn(a),e=a.target.value,-1!==n.suggestedIndex&&(e=n.suggestionList[n.suggestedIndex]),n.addTag(e),a.target.value="",n.renderTags(),n.hideSuggestions();case 46:case 8:if(n.pressedDelete(a),""===a.target.value&&n.removeLastTag(),1===a.target.value.length)return n.hideSuggestions();break;case 40:if(n.pressedDown(a),""!==n.input.val()||-1!==n.suggestedIndex&&null!=n.suggestedIndex||n.makeSuggestions(a,!0),c=n.suggestionList.length,n.suggestedIndex=n.suggestedIndex<c-1?n.suggestedIndex+1:c-1,n.selectSuggested(n.suggestedIndex),n.suggestedIndex>=0)return n.scrollSuggested(n.suggestedIndex);break;case 38:if(n.pressedUp(a),n.suggestedIndex=n.suggestedIndex>0?n.suggestedIndex-1:0,n.selectSuggested(n.suggestedIndex),n.suggestedIndex>=0)return n.scrollSuggested(n.suggestedIndex);break;case 9:case 27:return n.hideSuggestions(),n.suggestedIndex=-1}},this.keyUpHandler=function(a){var b;return b=null!=a.keyCode?a.keyCode:a.which,40!==b&&38!==b&&27!==b?n.makeSuggestions(a,!1):void 0},this.getSuggestions=function(b,c){var d=this;return this.suggestionList=[],this.caseInsensitive&&(b=b.toLowerCase()),a.each(this.suggestions,function(a,e){var f;return f=d.caseInsensitive?e.substring(0,b.length).toLowerCase():e.substring(0,b.length),d.tagsArray.indexOf(e)<0&&f===b&&(b.length>0||c)?d.suggestionList.push(e):void 0}),this.suggestionList},this.makeSuggestions=function(b,c,d){return null==d&&(d=null!=b.target.value?b.target.value:b.target.textContent),n.suggestedIndex=-1,n.$suggestionList.html(""),a.each(n.getSuggestions(d,c),function(a,b){return n.$suggestionList.append(n.template("tags_suggestion",{suggestion:b}))}),n.$(".tags-suggestion").mouseover(n.selectSuggestedMouseOver),n.$(".tags-suggestion").click(n.suggestedClicked),n.suggestionList.length>0?n.showSuggestions():n.hideSuggestions()},this.suggestedClicked=function(a){return e=a.target.textContent,-1!==n.suggestedIndex&&(e=n.suggestionList[n.suggestedIndex]),n.addTag(e),n.input.val(""),n.makeSuggestions(a,!1,""),n.input.focus(),n.hideSuggestions()},this.hideSuggestions=function(){return n.$(".tags-suggestion-list").css({display:"none"})},this.showSuggestions=function(){return n.$(".tags-suggestion-list").css({display:"block"})},this.selectSuggestedMouseOver=function(b){return a(".tags-suggestion").removeClass("tags-suggestion-highlighted"),a(b.target).addClass("tags-suggestion-highlighted"),a(b.target).mouseout(n.selectSuggestedMousedOut),n.suggestedIndex=n.$(".tags-suggestion").index(a(b.target))},this.selectSuggestedMousedOut=function(b){return a(b.target).removeClass("tags-suggestion-highlighted")},this.selectSuggested=function(b){var c;return a(".tags-suggestion").removeClass("tags-suggestion-highlighted"),c=n.$(".tags-suggestion").eq(b),c.addClass("tags-suggestion-highlighted")},this.scrollSuggested=function(a){var b,c,d,e;return c=n.$(".tags-suggestion").eq(a),d=n.$(".tags-suggestion").eq(0),b=c.position(),e=d.position(),null!=b?n.$(".tags-suggestion-list").scrollTop(b.top-e.top):void 0},this.adjustInputPosition=function(){var b,c,d,e,f,g;return f=n.$(".tag").last(),g=f.position(),c=null!=g?g.left+f.outerWidth(!0):0,d=null!=g?g.top:0,e=n.$element.width()-c,a(".tags-input",n.$element).css({paddingLeft:Math.max(c,0),paddingTop:Math.max(d,0),width:e}),b=null!=g?g.top+f.outerHeight(!0):22,n.$element.css({paddingBottom:b-n.$element.height()})},this.renderTags=function(){var b;return b=n.$(".tags"),b.html(""),n.input.attr("placeholder",0===n.tagsArray.length?n.promptText:""),a.each(n.tagsArray,function(c,d){return d=a(n.formatTag(c,d)),a("a.remove",d).click(n.removeTagClicked),a("a",d).mouseover(n.toggleCloseColor),a("a",d).mouseout(n.toggleCloseColor),n.displayPopovers&&n.initializePopoverFor(d,n.tagsArray[c],n.popoverArray[c]),b.append(d)}),n.adjustInputPosition()},this.renderReadOnly=function(){var b;return b=n.$(".tags"),b.html(0===n.tagsArray.length?n.readOnlyEmptyMessage:""),a.each(n.tagsArray,function(c,d){return d=a(n.formatTag(c,d,!0)),n.displayPopovers&&n.initializePopoverFor(d,n.tagsArray[c],n.popoverArray[c]),b.append(d)})},this.disableInput=function(){return this.$("input").prop("disabled",!0)},this.enableInput=function(){return this.$("input").prop("disabled",!1)},this.initializePopoverFor=function(b,d,e){return c={title:d,content:e,placement:"bottom"},"hoverShowClickHide"===n.popoverTrigger?(a(b).mouseover(function(){return a(b).popover("show"),a(".tag").not(b).popover("hide")}),a(document).click(function(){return a(b).popover("hide")})):c.trigger=n.popoverTrigger,a(b).popover(c)},this.toggleCloseColor=function(b){var c,d;return d=a(b.currentTarget),c=d.css("opacity"),c=.8>c?1:.6,d.css({opacity:c})},this.formatTag=function(a,b,c){var d;return null==c&&(c=!1),d=b.replace("<","&lt;").replace(">","&gt;"),n.template("tag",{tag:d,tagClass:n.tagClass,href:n.href[a],isPopover:n.displayPopovers,isReadOnly:c,tagSize:n.tagSize})},this.addDocumentListeners=function(){return a(document).mouseup(function(a){var b;return b=n.$(".tags-suggestion-list"),0===b.has(a.target).length?n.hideSuggestions():void 0})},this.template=function(a,b){return Tags.Templates.Template(this.getBootstrapVersion(),a,b)},this.$=function(b){return a(b,this.$element)},this.getBootstrapVersion=function(){return Tags.bootstrapVersion||this.bootstrapVersion},this.initializeDom=function(){return this.$element.append(this.template("tags_container"))},this.init=function(){return this.$element.addClass("bootstrap-tags").addClass("bootstrap-"+this.getBootstrapVersion()),this.initializeDom(),this.readOnly?(this.renderReadOnly(),this.removeTag=function(){},this.removeTagClicked=function(){},this.removeLastTag=function(){},this.addTag=function(){},this.addTagWithContent=function(){},this.renameTag=function(){},this.setPopover=function(){}):(this.input=a(this.template("input",{tagSize:this.tagSize})),this.suggestOnClick&&this.input.click(this.clickHandler),this.input.keydown(this.keyDownHandler),this.input.keyup(this.keyUpHandler),this.$element.append(this.input),this.$suggestionList=a(this.template("suggestion_list")),this.$element.append(this.$suggestionList),this.renderTags(),this.canAddByMaxNum()||this.disableInput(),this.addDocumentListeners())},this.init(),this},a.fn.tags=function(b){var c,d;return d={},c="number"==typeof b?b:-1,this.each(function(e,f){var g;return g=a(f),null==g.data("tags")&&g.data("tags",new a.tags(this,b)),c===e||0===e?d=g.data("tags"):void 0}),d}})}.call(this),function(){window.Tags||(window.Tags={}),Tags.Helpers||(Tags.Helpers={}),Tags.Helpers.addPadding=function(a,b,c){return null==b&&(b=1),null==c&&(c=!0),c?0===b?a:Tags.Helpers.addPadding("&nbsp"+a+"&nbsp",b-1):a}}.call(this),function(){var a;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(a=Tags.Templates)["2"]||(a["2"]={}),Tags.Templates["2"].input=function(a){var b;return null==a&&(a={}),b=function(){switch(a.tagSize){case"sm":return"small";case"md":return"medium";case"lg":return"large"}}(),"<input type='text' class='tags-input input-"+b+"' />"}}.call(this),function(){var a;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(a=Tags.Templates)["2"]||(a["2"]={}),Tags.Templates["2"].tag=function(a){return null==a&&(a={}),"<div class='tag label "+a.tagClass+" "+a.tagSize+"' "+(a.isPopover?"rel='popover'":"")+">    <span>      "+(null!=a.href?"<a href='"+a.href+"'>":"")+"        "+Tags.Helpers.addPadding(a.tag,2,a.isReadOnly)+"      "+(null!=a.href?"</a>":"")+"    </span>    "+(a.isReadOnly?"":"<a><i class='remove icon-remove-sign icon-white' /></a>")+"  </div>"}}.call(this),function(){var a;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(a=Tags.Templates)["3"]||(a["3"]={}),Tags.Templates["3"].input=function(a){return null==a&&(a={}),"<input type='text' class='form-control tags-input input-"+a.tagSize+"' />"}}.call(this),function(){var a;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(a=Tags.Templates)["3"]||(a["3"]={}),Tags.Templates["3"].tag=function(a){return null==a&&(a={}),"<div class='tag label "+a.tagClass+" "+a.tagSize+"' "+(a.isPopover?"rel='popover'":"")+">    <span>      "+(null!=a.href?"<a href='"+a.href+"'>":"")+"        "+Tags.Helpers.addPadding(a.tag,2,a.isReadOnly)+"      "+(null!=a.href?"</a>":"")+"    </span>    "+(a.isReadOnly?"":"<a class='remove'><i class='remove glyphicon glyphicon-remove-sign glyphicon-white' /></a>")+"  </div>"}}.call(this),function(){var a;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(a=Tags.Templates).shared||(a.shared={}),Tags.Templates.shared.suggestion_list=function(a){return null==a&&(a={}),'<ul class="tags-suggestion-list dropdown-menu"></ul>'}}.call(this),function(){var a;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(a=Tags.Templates).shared||(a.shared={}),Tags.Templates.shared.tags_container=function(a){return null==a&&(a={}),'<div class="tags"></div>'}}.call(this),function(){var a;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(a=Tags.Templates).shared||(a.shared={}),Tags.Templates.shared.tags_suggestion=function(a){return null==a&&(a={}),"<li class='tags-suggestion'>"+a.suggestion+"</li>"}}.call(this),function(){window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),Tags.Templates.Template=function(a,b,c){return null!=Tags.Templates[a]&&null!=Tags.Templates[a][b]?Tags.Templates[a][b](c):Tags.Templates.shared[b](c)}}.call(this)}(window.jQuery);