/*!
 * bootstrap-tags 1.1.5
 * https://github.com/maxwells/bootstrap-tags
 * Copyright 2013 Max Lahey; Licensed MIT
 */

!function(a){(function(){window.Tags||(window.Tags={}),jQuery(function(){return a.tags=function(b,c){var d,e,f,g,h,i,j;null==c&&(c={});for(d in c)g=c[d],this[d]=g;if(this.bootstrapVersion||(this.bootstrapVersion="3"),this.readOnly||(this.readOnly=!1),this.suggestOnClick||(this.suggestOnClick=!1),this.suggestions||(this.suggestions=[]),this.restrictTo=null!=c.restrictTo?c.restrictTo.concat(this.suggestions):!1,this.exclude||(this.exclude=!1),this.displayPopovers=null!=c.popovers?!0:null!=c.popoverData,this.popoverTrigger||(this.popoverTrigger="hover"),this.tagClass||(this.tagClass="btn-info"),this.tagSize||(this.tagSize="md"),this.promptText||(this.promptText="Enter tags..."),this.caseInsensitive||(this.caseInsensitive=!1),this.readOnlyEmptyMessage||(this.readOnlyEmptyMessage="No tags to display..."),this.maxNumTags||(this.maxNumTags=-1),this.beforeAddingTag||(this.beforeAddingTag=function(){}),this.afterAddingTag||(this.afterAddingTag=function(){}),this.beforeDeletingTag||(this.beforeDeletingTag=function(){}),this.afterDeletingTag||(this.afterDeletingTag=function(){}),this.definePopover||(this.definePopover=function(a){return'associated content for "'+a+'"'}),this.excludes||(this.excludes=function(){return!1}),this.tagRemoved||(this.tagRemoved=function(){}),this.pressedReturn||(this.pressedReturn=function(){}),this.pressedDelete||(this.pressedDelete=function(){}),this.pressedDown||(this.pressedDown=function(){}),this.pressedUp||(this.pressedUp=function(){}),this.$element=a(b),null!=c.tagData?this.tagsArray=c.tagData:(f=a(".tag-data",this.$element).html(),this.tagsArray=null!=f?f.split(","):[]),c.popoverData)this.popoverArray=c.popoverData;else for(this.popoverArray=[],j=this.tagsArray,h=0,i=j.length;i>h;h++)e=j[h],this.popoverArray.push(null);return this.getTags=function(a){return function(){return a.tagsArray}}(this),this.getTagsContent=function(a){return function(){return a.popoverArray}}(this),this.getTagsWithContent=function(a){return function(){var b,c,d,e;for(b=[],c=d=0,e=a.tagsArray.length-1;e>=0?e>=d:d>=e;c=e>=0?++d:--d)b.push({tag:a.tagsArray[c],content:a.popoverArray[c]});return b}}(this),this.getTag=function(a){return function(b){var c;return c=a.tagsArray.indexOf(b),c>-1?a.tagsArray[c]:null}}(this),this.getTagWithContent=function(a){return function(b){var c;return c=a.tagsArray.indexOf(b),{tag:a.tagsArray[c],content:a.popoverArray[c]}}}(this),this.hasTag=function(a){return function(b){return a.tagsArray.indexOf(b)>-1}}(this),this.removeTagClicked=function(b){return function(c){return"A"===c.currentTarget.tagName&&(b.removeTag(a("span",c.currentTarget.parentElement).html()),a(c.currentTarget.parentNode).remove()),b}}(this),this.removeLastTag=function(a){return function(){return a.tagsArray.length>0&&(a.removeTag(a.tagsArray[a.tagsArray.length-1]),a.canAddByMaxNum()&&a.enableInput()),a}}(this),this.removeTag=function(a){return function(b){if(a.tagsArray.indexOf(b)>-1){if(a.beforeDeletingTag(b)===!1)return;a.popoverArray.splice(a.tagsArray.indexOf(b),1),a.tagsArray.splice(a.tagsArray.indexOf(b),1),a.renderTags(),a.afterDeletingTag(b),a.canAddByMaxNum()&&a.enableInput()}return a}}(this),this.canAddByRestriction=function(a){return this.restrictTo===!1||-1!==this.restrictTo.indexOf(a)},this.canAddByExclusion=function(a){return(this.exclude===!1||-1===this.exclude.indexOf(a))&&!this.excludes(a)},this.canAddByMaxNum=function(){return-1===this.maxNumTags||this.tagsArray.length<this.maxNumTags},this.addTag=function(a){return function(b){var c;if(a.canAddByRestriction(b)&&!a.hasTag(b)&&b.length>0&&a.canAddByExclusion(b)&&a.canAddByMaxNum()){if(a.beforeAddingTag(b)===!1)return;c=a.definePopover(b),a.popoverArray.push(c||null),a.tagsArray.push(b),a.afterAddingTag(b),a.renderTags(),a.canAddByMaxNum()||a.disableInput()}return a}}(this),this.addTagWithContent=function(a){return function(b,c){if(a.canAddByRestriction(b)&&!a.hasTag(b)&&b.length>0){if(a.beforeAddingTag(b)===!1)return;a.tagsArray.push(b),a.popoverArray.push(c),a.afterAddingTag(b),a.renderTags()}return a}}(this),this.renameTag=function(a){return function(b,c){return a.tagsArray[a.tagsArray.indexOf(b)]=c,a.renderTags(),a}}(this),this.setPopover=function(a){return function(b,c){return a.popoverArray[a.tagsArray.indexOf(b)]=c,a.renderTags(),a}}(this),this.clickHandler=function(a){return function(b){return a.makeSuggestions(b,!0)}}(this),this.keyDownHandler=function(a){return function(b){var c,d;switch(c=null!=b.keyCode?b.keyCode:b.which){case 13:return b.preventDefault(),a.pressedReturn(b),e=b.target.value,-1!==a.suggestedIndex&&(e=a.suggestionList[a.suggestedIndex]),a.addTag(e),b.target.value="",a.renderTags(),a.hideSuggestions();case 46:case 8:if(a.pressedDelete(b),""===b.target.value&&a.removeLastTag(),1===b.target.value.length)return a.hideSuggestions();break;case 40:if(a.pressedDown(b),""!==a.input.val()||-1!==a.suggestedIndex&&null!=a.suggestedIndex||a.makeSuggestions(b,!0),d=a.suggestionList.length,a.suggestedIndex=a.suggestedIndex<d-1?a.suggestedIndex+1:d-1,a.selectSuggested(a.suggestedIndex),a.suggestedIndex>=0)return a.scrollSuggested(a.suggestedIndex);break;case 38:if(a.pressedUp(b),a.suggestedIndex=a.suggestedIndex>0?a.suggestedIndex-1:0,a.selectSuggested(a.suggestedIndex),a.suggestedIndex>=0)return a.scrollSuggested(a.suggestedIndex);break;case 9:case 27:return a.hideSuggestions(),a.suggestedIndex=-1}}}(this),this.keyUpHandler=function(a){return function(b){var c;return c=null!=b.keyCode?b.keyCode:b.which,40!==c&&38!==c&&27!==c?a.makeSuggestions(b,!1):void 0}}(this),this.getSuggestions=function(b,c){return this.suggestionList=[],this.caseInsensitive&&(b=b.toLowerCase()),a.each(this.suggestions,function(a){return function(d,e){var f;return f=a.caseInsensitive?e.substring(0,b.length).toLowerCase():e.substring(0,b.length),a.tagsArray.indexOf(e)<0&&f===b&&(b.length>0||c)?a.suggestionList.push(e):void 0}}(this)),this.suggestionList},this.makeSuggestions=function(b){return function(c,d,e){return null==e&&(e=null!=c.target.value?c.target.value:c.target.textContent),b.suggestedIndex=-1,b.$suggestionList.html(""),a.each(b.getSuggestions(e,d),function(a,c){return b.$suggestionList.append(b.template("tags_suggestion",{suggestion:c}))}),b.$(".tags-suggestion").mouseover(b.selectSuggestedMouseOver),b.$(".tags-suggestion").click(b.suggestedClicked),b.suggestionList.length>0?b.showSuggestions():b.hideSuggestions()}}(this),this.suggestedClicked=function(a){return function(b){return e=b.target.textContent,-1!==a.suggestedIndex&&(e=a.suggestionList[a.suggestedIndex]),a.addTag(e),a.input.val(""),a.makeSuggestions(b,!1,""),a.input.focus(),a.hideSuggestions()}}(this),this.hideSuggestions=function(a){return function(){return a.$(".tags-suggestion-list").css({display:"none"})}}(this),this.showSuggestions=function(a){return function(){return a.$(".tags-suggestion-list").css({display:"block"})}}(this),this.selectSuggestedMouseOver=function(b){return function(c){return a(".tags-suggestion").removeClass("tags-suggestion-highlighted"),a(c.target).addClass("tags-suggestion-highlighted"),a(c.target).mouseout(b.selectSuggestedMousedOut),b.suggestedIndex=b.$(".tags-suggestion").index(a(c.target))}}(this),this.selectSuggestedMousedOut=function(){return function(b){return a(b.target).removeClass("tags-suggestion-highlighted")}}(this),this.selectSuggested=function(b){return function(c){var d;return a(".tags-suggestion").removeClass("tags-suggestion-highlighted"),d=b.$(".tags-suggestion").eq(c),d.addClass("tags-suggestion-highlighted")}}(this),this.scrollSuggested=function(a){return function(b){var c,d,e,f;return d=a.$(".tags-suggestion").eq(b),e=a.$(".tags-suggestion").eq(0),c=d.position(),f=e.position(),null!=c?a.$(".tags-suggestion-list").scrollTop(c.top-f.top):void 0}}(this),this.adjustInputPosition=function(b){return function(){var c,d,e,f,g,h;return g=b.$(".tag").last(),h=g.position(),d=null!=h?h.left+g.outerWidth(!0):0,e=null!=h?h.top:0,f=b.$element.width()-d,a(".tags-input",b.$element).css({paddingLeft:Math.max(d,0),paddingTop:Math.max(e,0),width:f}),c=null!=h?h.top+g.outerHeight(!0):22,b.$element.css({paddingBottom:c-b.$element.height()})}}(this),this.renderTags=function(b){return function(){var c;return c=b.$(".tags"),c.html(""),b.input.attr("placeholder",0===b.tagsArray.length?b.promptText:""),a.each(b.tagsArray,function(d,e){return e=a(b.formatTag(d,e)),a("a",e).click(b.removeTagClicked),a("a",e).mouseover(b.toggleCloseColor),a("a",e).mouseout(b.toggleCloseColor),b.displayPopovers&&b.initializePopoverFor(e,b.tagsArray[d],b.popoverArray[d]),c.append(e)}),b.adjustInputPosition()}}(this),this.renderReadOnly=function(b){return function(){var c;return c=b.$(".tags"),c.html(0===b.tagsArray.length?b.readOnlyEmptyMessage:""),a.each(b.tagsArray,function(d,e){return e=a(b.formatTag(d,e,!0)),b.displayPopovers&&b.initializePopoverFor(e,b.tagsArray[d],b.popoverArray[d]),c.append(e)})}}(this),this.disableInput=function(){return this.$("input").prop("disabled",!0)},this.enableInput=function(){return this.$("input").prop("disabled",!1)},this.initializePopoverFor=function(b){return function(d,e,f){return c={title:e,content:f,placement:"bottom"},"hoverShowClickHide"===b.popoverTrigger?(a(d).mouseover(function(){return a(d).popover("show"),a(".tag").not(d).popover("hide")}),a(document).click(function(){return a(d).popover("hide")})):c.trigger=b.popoverTrigger,a(d).popover(c)}}(this),this.toggleCloseColor=function(b){var c,d;return d=a(b.currentTarget),c=d.css("opacity"),c=.8>c?1:.6,d.css({opacity:c})},this.formatTag=function(a){return function(b,c,d){var e;return null==d&&(d=!1),e=c.replace("<","&lt;").replace(">","&gt;"),a.template("tag",{tag:e,tagClass:a.tagClass,isPopover:a.displayPopovers,isReadOnly:d,tagSize:a.tagSize})}}(this),this.addDocumentListeners=function(b){return function(){return a(document).mouseup(function(a){var c;return c=b.$(".tags-suggestion-list"),0===c.has(a.target).length?b.hideSuggestions():void 0})}}(this),this.template=function(a,b){return Tags.Templates.Template(this.getBootstrapVersion(),a,b)},this.$=function(b){return a(b,this.$element)},this.getBootstrapVersion=function(){return Tags.bootstrapVersion||this.bootstrapVersion},this.initializeDom=function(){return this.$element.append(this.template("tags_container"))},this.init=function(){return this.$element.addClass("bootstrap-tags").addClass("bootstrap-"+this.getBootstrapVersion()),this.initializeDom(),this.readOnly?(this.renderReadOnly(),this.removeTag=function(){},this.removeTagClicked=function(){},this.removeLastTag=function(){},this.addTag=function(){},this.addTagWithContent=function(){},this.renameTag=function(){},this.setPopover=function(){}):(this.input=a(this.template("input",{tagSize:this.tagSize})),this.suggestOnClick&&this.input.click(this.clickHandler),this.input.keydown(this.keyDownHandler),this.input.keyup(this.keyUpHandler),this.$element.append(this.input),this.$suggestionList=a(this.template("suggestion_list")),this.$element.append(this.$suggestionList),this.renderTags(),this.canAddByMaxNum()||this.disableInput(),this.addDocumentListeners())},this.init(),this},a.fn.tags=function(b){var c,d;return d={},c="number"==typeof b?b:-1,this.each(function(e,f){var g;return g=a(f),null==g.data("tags")&&g.data("tags",new a.tags(this,b)),c===e||0===e?d=g.data("tags"):void 0}),d}})}).call(this),function(){window.Tags||(window.Tags={}),Tags.Helpers||(Tags.Helpers={}),Tags.Helpers.addPadding=function(a,b,c){return null==b&&(b=1),null==c&&(c=!0),c?0===b?a:Tags.Helpers.addPadding("&nbsp"+a+"&nbsp",b-1):a}}.call(this),function(){var a;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(a=Tags.Templates)[2]||(a[2]={}),Tags.Templates[2].input=function(a){var b;return null==a&&(a={}),b=function(){switch(a.tagSize){case"sm":return"small";case"md":return"medium";case"lg":return"large"}}(),"<input type='text' class='tags-input input-"+b+"' />"}}.call(this),function(){var a;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(a=Tags.Templates)[2]||(a[2]={}),Tags.Templates[2].tag=function(a){return null==a&&(a={}),"<div class='tag label "+a.tagClass+" "+a.tagSize+"' "+(a.isPopover?"rel='popover'":"")+"> <span>"+Tags.Helpers.addPadding(a.tag,2,a.isReadOnly)+"</span> "+(a.isReadOnly?"":"<a><i class='remove icon-remove-sign icon-white' /></a>")+" </div>"}}.call(this),function(){var a;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(a=Tags.Templates)[3]||(a[3]={}),Tags.Templates[3].input=function(a){return null==a&&(a={}),"<input type='text' class='form-control tags-input input-"+a.tagSize+"' />"}}.call(this),function(){var a;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(a=Tags.Templates)[3]||(a[3]={}),Tags.Templates[3].tag=function(a){return null==a&&(a={}),"<div class='tag label "+a.tagClass+" "+a.tagSize+"' "+(a.isPopover?"rel='popover'":"")+"> <span>"+Tags.Helpers.addPadding(a.tag,2,a.isReadOnly)+"</span> "+(a.isReadOnly?"":"<a><i class='remove glyphicon glyphicon-remove-sign glyphicon-white' /></a>")+" </div>"}}.call(this),function(){var a;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(a=Tags.Templates).shared||(a.shared={}),Tags.Templates.shared.suggestion_list=function(a){return null==a&&(a={}),'<ul class="tags-suggestion-list dropdown-menu"></ul>'}}.call(this),function(){var a;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(a=Tags.Templates).shared||(a.shared={}),Tags.Templates.shared.tags_container=function(a){return null==a&&(a={}),'<div class="tags"></div>'}}.call(this),function(){var a;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(a=Tags.Templates).shared||(a.shared={}),Tags.Templates.shared.tags_suggestion=function(a){return null==a&&(a={}),"<li class='tags-suggestion'>"+a.suggestion+"</li>"}}.call(this),function(){window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),Tags.Templates.Template=function(a,b,c){return null!=Tags.Templates[a]&&null!=Tags.Templates[a][b]?Tags.Templates[a][b](c):Tags.Templates.shared[b](c)}}.call(this)}(window.jQuery);